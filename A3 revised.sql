CREATE DATABASE COLLECTION;
USE COLLECTION;
CREATE TABLE TOPIC (
    TOPIC_ID INT NOT NULL UNIQUE,
    TOPIC_DESCRIPTION varchar(255),
    PRIMARY KEY (TOPIC_ID)
); 
CREATE TABLE LOCATION(
LOCATION_ID INT NOT NULL UNIQUE,
LOCATION_DESCRIPTION VARCHAR(255),
LOCATION_CITYORCOUNTY VARCHAR(32),
LOCATION_PROVINCE VARCHAR(32),
LOCATION_COUNTRY varchar(32),
LOCATION_MAPPED varchar(3),
PRIMARY KEY (LOCATION_ID)
);

CREATE TABLE CURRENTLOCATION(
LOCATION_ID INT NOT NULL UNIQUE,
LOCATION_STREET varchar(32) NOT NULL,
LOCATION_ZIPCODE VARCHAR(6),
PRIMARY KEY (LOCATION_ID),
FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION (LOCATION_ID)
);

CREATE TABLE INSTITUTION(
INS_ID INT NOT NULL UNIQUE,
INS_NAME varchar(32) NOT NULL,
LOCATION_ID int,
PRIMARY KEY (INS_ID),
FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION (LOCATION_ID)
);

CREATE TABLE COMPANY(
COMPANY_ID INT NOT NULL UNIQUE,
COMPANY_NAME varchar(32) NOT NULL,
COMPANY_TYPE varchar(32),
COMPANY_ALTNAME varchar(255),
LOCATION_ID INT,
PRIMARY KEY (COMPANY_ID),
FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION (LOCATION_ID)
);

CREATE TABLE PEOPLE(
PEOPLE_ID INT NOT NULL UNIQUE,
PEOPLE_FNAME varchar(32) NOT NULL,
PEOPLE_LNAME varchar(32) NOT NULL,
PEOPLE_ALTNAME varchar(32),
PRIMARY KEY (PEOPLE_ID)
);

CREATE TABLE RELATIONSHIP(
PEOPLE1_ID INT NOT NULL,
PEOPLE2_ID INT NOT NULL,
RELATIONSHIP_DESCRIPTION varchar(32),
PRIMARY KEY (PEOPLE1_ID,PEOPLE2_ID),
FOREIGN KEY (PEOPLE1_ID) REFERENCES PEOPLE (PEOPLE_ID),
FOREIGN KEY (PEOPLE2_ID) REFERENCES PEOPLE (PEOPLE_ID)
);

CREATE TABLE EMPLOYMENT(
EMP_ID INT NOT NULL UNIQUE,
PEOPLE_ID INT NOT NULL,
COMPANY_ID INT NOT NULL,
EMP_TYPE VARCHAR(32),
PRIMARY KEY (EMP_ID),
FOREIGN KEY (PEOPLE_ID) REFERENCES PEOPLE (PEOPLE_ID),
FOREIGN KEY (COMPANY_ID) REFERENCES COMPANY (COMPANY_ID)
);

CREATE TABLE LETTER(
LETTER_ID INT NOT NULL UNIQUE,
LETTER_TITLE varchar(255) NOT NULL,
LETTER_CREATEDYEAR int,
INSTITUTION_ID INT,
REMITTANCE_CURRENCY varchar(32),
REMITTANCE_AMOUNT INT,
SENDER_ID INT,
RECEIVER_ID INT,
SENDERLOC_ID INT,
RECEIVERLOC_ID INT,
LETTER_DIGITIZEDTIME DATE NOT NULL,
LETTER_LINK VARCHAR(255),
PRIMARY KEY (LETTER_ID),
FOREIGN KEY (INSTITUTION_ID) REFERENCES INSTITUTION (INS_ID),
FOREIGN KEY (SENDER_ID) REFERENCES PEOPLE (PEOPLE_ID),
FOREIGN KEY (RECEIVER_ID) REFERENCES PEOPLE (PEOPLE_ID),
FOREIGN KEY (SENDERLOC_ID) REFERENCES LOCATION (LOCATION_ID),
FOREIGN KEY (RECEIVERLOC_ID) REFERENCES LOCATION (LOCATION_ID)
);

CREATE TABLE EXPRESS(
EXPRESS_ID INT NOT NULL UNIQUE,
LETTER_ID INT NOT NULL,
TOPIC_ID INT NOT NULL,
PRIMARY KEY (EXPRESS_ID),
FOREIGN KEY (LETTER_ID) REFERENCES LETTER (LETTER_ID),
FOREIGN KEY (TOPIC_ID) REFERENCES TOPIC (TOPIC_ID)
);

CREATE TABLE LETTERRELATIONSHIP(
LETTER1_ID INT NOT NULL,
LETTER2_ID INT NOT NULL,
LETTERRELATIONSHIP_DESCRIPTION varchar(255),
PRIMARY KEY (LETTER1_ID,LETTER2_ID),
FOREIGN KEY (LETTER1_ID) REFERENCES LETTER (LETTER_ID),
FOREIGN KEY (LETTER2_ID) REFERENCES LETTER (LETTER_ID)
);

CREATE TABLE ENVELOPE(
LETTER_ID INT NOT NULL UNIQUE,
ENVELOP_FORMAT varchar(255),
ENVELOPE_SENDSEAL varchar(255),
ENVELOPE_RECSEAL varchar(255),
PRIMARY KEY (LETTER_ID),
FOREIGN KEY (LETTER_ID) REFERENCES LETTER (LETTER_ID)
);

/*insert TOPIC*/
INSERT INTO TOPIC VALUES(51, 'REQUEST FOR PAYMENT');
INSERT INTO TOPIC VALUES(52, 'GENERAL INQUAIRY');
INSERT INTO TOPIC VALUES(54, 'FAMILY');
INSERT INTO TOPIC VALUES(55, 'payment confirmation');
INSERT INTO TOPIC VALUES(58, 'DIFFICULTIES entering the country');
INSERT INTO TOPIC VALUES(59, 'MONEY TRANSFER');
INSERT INTO TOPIC VALUES(69, 'INFORMATION DELIVERY');
INSERT INTO TOPIC VALUES(70, 'SAY GOODBYE');
INSERT INTO TOPIC VALUES(72, 'INQUARY ABOUT MONEY');
/*topic shen*/
INSERT INTO TOPIC VALUES(1, 'find a job overseas');
INSERT INTO TOPIC VALUES(2,'latest news');
INSERT INTO TOPIC VALUES(3,'gift');
INSERT INTO TOPIC VALUES(4,	'current job');
INSERT INTO TOPIC VALUES(8,'buy goods');

/*insert PEOPLE*/
INSERT INTO PEOPLE VALUES(51, 'YUE', 'SHEN', NULL);
INSERT INTO PEOPLE VALUES(61, 'JIONGCHANG', 'ZHU', NULL);
INSERT INTO PEOPLE VALUES(52, 'MINSHI', 'HUANG', NULL);
INSERT INTO PEOPLE VALUES(62, 'SHOUXIANG', 'HUANG', 'ZESHENG');
INSERT INTO PEOPLE VALUES(53, 'XUAN', 'WANG', NULL);
INSERT INTO PEOPLE VALUES(63, 'KUI', 'LI', 'HAOXIAN');
INSERT INTO PEOPLE VALUES(54, 'GANGAN', 'WANG', NULL);
INSERT INTO PEOPLE VALUES(64, 'YIKUN', 'ZHENG', NULL);
INSERT INTO PEOPLE VALUES(55, 'HONGYANG', 'LI', NULL);
INSERT INTO PEOPLE VALUES(65, 'GUOYANG', 'LI', 'YONGSHI');
INSERT INTO PEOPLE VALUES(56, 'JISHENG', 'LI', NULL);
INSERT INTO PEOPLE VALUES(66, 'SUTING', 'LI', NULL);
INSERT INTO PEOPLE VALUES(57, 'YANG', 'LI', NULL);
INSERT INTO PEOPLE VALUES(67, 'YINGRUN', 'LI', 'YINGDI');
INSERT INTO PEOPLE VALUES(58, 'ZONGDONG', 'LI', NULL);
INSERT INTO PEOPLE VALUES(68, 'ZONGRONG', 'LI', NULL);
INSERT INTO PEOPLE VALUES(59, 'DERONG', 'LINN', NULL);
INSERT INTO PEOPLE VALUES(69, 'NAILIN', 'LIN', NULL);
INSERT INTO PEOPLE VALUES(60, 'YAOCHANG', 'ZHU', NULL);
INSERT INTO PEOPLE VALUES(70, 'ZHAO', 'ZHU', NULL);
INSERT INTO PEOPLE VALUES(71, 'XINCHANG', 'WU', NULL);
INSERT INTO PEOPLE VALUES(81, 'HUAXIANG', 'WU', NULL);
INSERT INTO PEOPLE VALUES(72, 'XUNQING', 'WU', NULL);
INSERT INTO PEOPLE VALUES(82, 'SHENG', 'HUANG', NULL);
INSERT INTO PEOPLE VALUES(73, 'DASHAO', 'YE', NULL);
INSERT INTO PEOPLE VALUES(83, 'DASHENG', 'YE', NULL);
/*people shen*/
INSERT INTO PEOPLE VALUES(1,	'Wan Fu',	'Zeng', NULL);
INSERT INTO PEOPLE VALUES(2, 'Bei Yuan',	'Zeng'	, NULL);
INSERT INTO PEOPLE VALUES(3,	'Shao Wei',	'Guo',	'GUO WEI SAN');
INSERT INTO PEOPLE VALUES(4,	'Min De',	'Huang'	, NULL);
INSERT INTO PEOPLE VALUES(5,	'Kun He',	'Hu'	, NULL);
INSERT INTO PEOPLE VALUES(6,	'Sheng',	'Hu'	, NULL);
INSERT INTO PEOPLE VALUES(7,	'Hao Gui',	'Li'	, NULL);
INSERT INTO PEOPLE VALUES(8,	'Da Jin',	'Chen'	, NULL);
INSERT INTO PEOPLE VALUES(15,	'Xiu Can',	'Zhong'	, NULL);
INSERT INTO PEOPLE VALUES(16,	'Song Ang',	'Chen'	, NULL);

/*insert Location*/
INSERT INTO location VALUES(62, 'long village',NULL, NULL, 'CHINA', 'NO');
INSERT INTO location VALUES(53, 'WING SANG VAN','VANCOUVER', 'BC', 'CANADA', 'YES');
INSERT INTO location VALUES(63, 'DBAX','PORTLAND', 'OREGON', 'USA', 'NO');
INSERT INTO location VALUES(54, 'YINGQIN','VANCOUVER', 'BC', 'CANADA', 'NO');
INSERT INTO location VALUES(64, 'HUAQI','FUZHOU', 'FUJIAN', 'CHINA', 'NO');

INSERT INTO location VALUES(65, 'HEYICHENSHANCUN',null, NULL, 'CHINA', 'NO');
INSERT INTO location VALUES(66, 'TAISHANXIN VILLAGE', 'CHAOSHAN', 'GUANGDONG', 'CHINA', 'NO');
INSERT INTO location VALUES(57, 'YUNSHAN','SHANTOU', 'GUANGDONG', 'CHINA', 'YES');
INSERT INTO location VALUES(67, 'XIN VILLAGE RENSHI','VANCOUVER', 'BC', 'CANADA', 'NO');

INSERT INTO location VALUES(68, 'XING YUAN','HONGKONG', 'HONGKONG', 'CHINA', 'YES');
INSERT INTO location VALUES(71, 'QIWEISHAN','Kaohsiung', 'TW', 'TW', 'NO');
INSERT INTO location VALUES(81, 'DUNKAGUFU','VANCOUVER', 'BC', 'CANADA', 'NO');
INSERT INTO location VALUES(73, 'HOPONT','Kaohsiung', 'WA', 'USA', 'NO');
INSERT INTO location VALUES(83, 'BOP OF 256','VANCOUVER', 'BC', 'CANADA', 'NO');
/*insert Location shen*/
INSERT INTO LOCATION VALUES(1,'LUN HING CO, 434 Third Ave','SAN DIEGO',	'CA','USA',	'YES');
INSERT INTO LOCATION VALUES(2,'YUAN SHENG CO',	'VANCOUVER',	'BC',	'CA',	'NO');
INSERT INTO LOCATION VALUES(3,	'FEIZHI TOWN',	NULL,NULL,	NULL,	'NO');
INSERT INTO LOCATION VALUES(4,	NULL,	'MINNEAPOLIS','MN',	'USA',	NULL);
INSERT INTO LOCATION VALUES(5,	'Long Tou Village',	'JIANGMEN',	'GUANGDONG','CHN',	'YES');
INSERT INTO LOCATION VALUES(6,	'YUNLIBI TOWN',	NULL,NULL,NULL,	'NO');
INSERT INTO LOCATION VALUES(7,	'Chen Shan Village','He County',NULL,	'CHN',	'NO');
INSERT INTO LOCATION VALUES(8,	'Shen Village',	'TAISHAN',	'GUANGDONG',	'CHN',	'YES');
INSERT INTO LOCATION VALUES(17, NULL, 			'Ignace', 'ONT', 'CA', 'NO');

/*insert current location*/
INSERT INTO currentlocation VALUES(53, '51 E Pender St','V6A1S9');
INSERT INTO currentlocation VALUES(68, '31 BONHAN STREET EAST','74MRRW');
/*current location shen*/
INSERT INTO currentlocation VALUES(1,	'434 Third Ave',	'92101');

/*insert company*/
INSERT INTO company VALUES(51, 'Donglai', null, null, null);
INSERT INTO company VALUES(53, 'WING SANG', 'CONTRACTING LABOR', null, 53);
INSERT INTO company VALUES(63, 'BAOHUANGHUI', 'POLITICAL INVESTMENT', 'CAVALIERS', null );
INSERT INTO company VALUES(59, 'XIANGLONG', NULL, NULL, null );
INSERT INTO company VALUES(69, 'HONGMAO COMPANY', NULL, NULL, null );
/*company shen*/
INSERT INTO company VALUES(1,	'LUN HING CO',	'mining', NULL,	1);
INSERT INTO company VALUES(2,	'JUSHENGANTAI',	NULL,	NULL, NULL);	
INSERT INTO company VALUES(3,	'YUAN SHENG CO',	NULL,	NULL,	2);

/*insert institution*/
INSERT INTO institution VALUES(53, 'TAILIANGUANG',63);
INSERT INTO institution VALUES(55, 'WING SANG',53);
INSERT INTO institution VALUES(56, 'XIGUOFU',NULL);
INSERT INTO institution VALUES(58, 'JIEYAO',NULL);
INSERT INTO institution VALUES(59, 'HONGMAO',NULL);
/*institution shen*/
INSERT INTO INSTITUTION VALUES(1,	'YUAN SHENG CO',	2);

/*insert LETTER*/
INSERT INTO letter VALUES(51, 'Letter, Shen Yue to Zhu Jiong Chang 1904',1904 , NULL, NULL, 0, 51, 61,NULL, NULL,'2008-12-03','dx.doi.org/10.14288/1.0114302');
INSERT INTO letter VALUES(52, 'Letter, to Huang Shou Xiang, general inquiries, ca. 1902',1902 , NULL, NULL, 0, 52, 62,NULL, NULL,'2008-11-25','dx.doi.org/10.14288/1.0114126');
INSERT INTO letter VALUES(53, 'Letter, to Li Kui, requesting to pay membership fee of Bao Huang Hui, 1906',1906 , 53, NULL, 0, 53, 63,53, 63,'2008-11-25','dx.doi.org/10.14288/1.0114337');
INSERT INTO letter VALUES(54, 'Letter, Wang Gan Gan to Zheng Yi Kun, informing his wedding, 1914',1914 , NULL, NULL, 0, 54, 64,54, 64,'2008-12-15','dx.doi.org/10.14288/1.0114486');
INSERT INTO letter VALUES(55, 'Letter, Li Hong Yang to Li Guo Yang, received 60 dollars, ca. 1908',1908 , 55, NULL, 0, 55, 65,NULL, 65,'2008-11-17','dx.doi.org/10.14288/1.0113984');
INSERT INTO letter VALUES(56, 'Letter, Li Ji Sheng to sister Li Su Ting, general inquiries, ca. 1903',1903 , 56, NULL, 0, 56, 66,NULL, 66,'2008-12-08','dx.doi.org/10.14288/1.0114222');
INSERT INTO letter VALUES(57, 'Letter, Li Yiang to Li Ying Run, informed money was sent, 1903',1903 , NULL, NULL, 0, 57, 67,57, 67,'2008-11-22','dx.doi.org/10.14288/1.0114060');
INSERT INTO letter VALUES(58, 'Letter, Li Zong Dong to Li Zong Rong, mentioned having difficulties to enter the country, ca. 1912',1912 , NULL, NULL, 0, 58, 68,NULL, 68,'2008-12-11','dx.doi.org/10.14288/1.0114385');
INSERT INTO letter VALUES(59, 'Letter, Lin De Rong to Lin Nai Lin, reporting latest news, ca. 1906',1906 , 59, 'SILVER COIN', 20, 59, 69,NULL, null,'2008-12-03','dx.doi.org/10.14288/1.0114301');
INSERT INTO letter VALUES(60, 'Letter, Zhu Yao Chang to Zhu Zhao and Zhu Jiong, saying goodbye, 1904',1904 , 53, NULL, 0, 60, 70,NULL, null,'2008-11-27','dx.doi.org/10.14288/1.0114156');
INSERT INTO letter VALUES(61, 'Letter, Wu Xin Chang to Wu Hua Xiang, reporting latest news, 1903',1903 , NULL, NULL, 0, 71, 81,71, 81,'2008-11-22','dx.doi.org/10.14288/1.0114066');
INSERT INTO letter VALUES(62, 'Letter, Wu Xun Qing to Huang Sheng, inquiring about remitting money, 1903',1903 , 53, NULL, 0, 72, 82,NULL, NULL,'2008-11-22','dx.doi.org/10.14288/1.0114066');
INSERT INTO letter VALUES(63, 'Letter, Ye Da Shao to younger brother, Ye Da Shen, inquiring about entering the country, 1906',1906 , 53, NULL, 0, 73, 83, 73, 83,'2008-12-11','dx.doi.org/10.14288/1.0114334');
/*insert letter shen*/
INSERT INTO letter VALUES(1,	'Letter, Zeng Wan Fu to Zeng Bei Yuan',	1902,NULL,NULL,NULL,	2,	1,	1,	53,	'2008-11-17',	'https://dx.doi.org/10.14288/1.0114007');
INSERT INTO letter VALUES(2,	'Letter, Guo Shao Wei to Huang Min De',	1902,	1,NULL,NULL,	3,	4,	3,	2,	'2008-12-14',	'https://dx.doi.org/10.14288/1.0114459');
INSERT INTO letter VALUES(3,	'Letter, Hu Kun He to Hu Sheng',		1903,NULL,NULL,NULL,	5,	6,	4,	53,	'2008-11-26',	'https://dx.doi.org/10.14288/1.0114216');
INSERT INTO letter VALUES(4,	'Letter, Li Hao Gui to Chen Da Jin',	1902,	NULL,NULL,NULL,	7,	8,	5,	53,	'2008-11-17',	'https://dx.doi.org/10.14288/1.0113989');
INSERT INTO letter VALUES(10,	'Letter, Lin Nai Lin to Lin De Rong',	1906,	NULL,NULL,NULL,	69, 59,	NULL,68,'2006-12-03', NULL);
INSERT INTO letter VALUES(11,	'Letter, Zeng Bei Yuan to Zeng Wan Fu',	1902,	NULL,NULL,NULL,	1,	2,	53,1,	'2007-11-03',	NULL);
INSERT INTO letter VALUES(12,	'Letter, Zhong Xiu Can to Chen Song Ang',1915, NULL,NULL,NULL,	15, 16, NULL, 17, '2008-12-17', 'https://dx.doi.org/10.14288/1.0114562');

/*insert envelope*/
INSERT INTO envelope VALUES(52, 'Chinese','Huang Minshi', 'neiyaoji');
INSERT INTO envelope VALUES(53, 'WESTERN','VANCOUVER BC', 'PORTLAND ORE');
INSERT INTO envelope VALUES(54, 'WESTERN','VANCOUVER BC', 'HONG KONG');
INSERT INTO envelope VALUES(56, 'CHINESE',NULL, NULL);
INSERT INTO envelope VALUES(57, 'CHINESE','RUNFA', 'YANGNIANTANG');
INSERT INTO envelope VALUES(58, 'CHINESE','JIELIANZHONG', NULL);
INSERT INTO envelope VALUES(59, 'CHINESE','JIXIN', 'ERDE');
INSERT INTO envelope VALUES(60, 'CHINESE','WINGSANGSHUJIAN', 'JIONGCHANGSHUJIAN');
INSERT INTO envelope VALUES(61, 'CHINESE',NULL, NULL);
INSERT INTO envelope VALUES(62, 'CHINESE',NULL, NULL);
INSERT INTO envelope VALUES(63, 'WESTERN','ROOCHESTER MINN', 'VANCOUVER BC 162106');
/*insert envelope SHEN*/
INSERT INTO envelope VALUES(1,	'WESTERN',	'SAN DIEGO;1902-11-17',	'VANCOUVER, BC;1902-12-02');
INSERT INTO envelope VALUES(2,	'WESTERN',	'SOVA;1913-07-09', NULL);
INSERT INTO envelope VALUES(3,	'WESTERN',	'MINNEAPOLIS, MINN;1903-10-12',	'VANCOUVER, BC;1903-10-18');
INSERT INTO envelope VALUES(4,	'CHINESE',	NULL, NULL	);
INSERT INTO envelope VALUES(10,	'CHINESE',	NULL, NULL);
INSERT INTO envelope VALUES(11,	'WESTERN',	'VANCOUVER, BC;1902-12-12',	'SAN DIEGO;1902-12-30');
INSERT INTO envelope VALUES(12,	'CHINESE',	NULL, NULL);

/*insert express*/
INSERT INTO express VALUES(51, 51, 51);
INSERT INTO express VALUES(52, 52, 52);
INSERT INTO express VALUES(53, 53, 51);
INSERT INTO express VALUES(54, 54, 54);
INSERT INTO express VALUES(55, 55, 55);
INSERT INTO express VALUES(56, 56, 52);
INSERT INTO express VALUES(57, 57, 55);
INSERT INTO express VALUES(67, 57, 54);
INSERT INTO express VALUES(58, 58, 58);
INSERT INTO express VALUES(68, 58, 54);
INSERT INTO express VALUES(59, 59, 59);
INSERT INTO express VALUES(69, 59, 52);
INSERT INTO express VALUES(79, 59, 69);
INSERT INTO express VALUES(60, 60, 70);
INSERT INTO express VALUES(61, 61, 69);
INSERT INTO express VALUES(62, 61, 72);
INSERT INTO express VALUES(73, 63, 52);
INSERT INTO express VALUES(83, 63, 54);
/*insert express shen*/
INSERT INTO express VALUES(91, 55, 8);
INSERT INTO express VALUES(92, 56, 4);
INSERT INTO express VALUES(93, 59, 4);

INSERT INTO express VALUES(1,	1,	1);
INSERT INTO express VALUES(2,	2,	2);
INSERT INTO express VALUES(3,	2,	3);
INSERT INTO express VALUES(4,	2,	4);
INSERT INTO express VALUES(5,	3,	58);
INSERT INTO express VALUES(6,	3,	52);
INSERT INTO express VALUES(7,	4,	54);
INSERT INTO express VALUES(8,	4,	52);

/*insert employment*/
INSERT INTO employment VALUES( 51, 51, 51, NULL);
INSERT INTO employment VALUES( 53, 53, 63, 'CORDINATOR');
INSERT INTO employment VALUES( 63, 63, 51, 'WORKER');
INSERT INTO employment VALUES( 55, 55, 53, 'ACCOUNTANT');
INSERT INTO employment VALUES( 59, 59, 59, 'CLERK');
INSERT INTO employment VALUES( 82, 82, 53, 'CLERK');
INSERT INTO employment VALUES( 83, 83, 53, 'WORKER');
/*shen employment*/
INSERT INTO employment VALUES(1,	1,	1,	'Miner');
INSERT INTO employment VALUES(2,	3,	2,	 NULL);
INSERT INTO employment VALUES(3,	6,	53,	 NULL);
INSERT INTO employment VALUES(4, 	8,	53,	 NULL);

/*insert RELATIONSHIP*/
INSERT INTO relationship VALUES( 51, 61, 'business');
INSERT INTO relationship VALUES( 52, 62, 'NEPHEW');
INSERT INTO relationship VALUES( 53, 63, 'COMRADE');
INSERT INTO relationship VALUES( 54, 64, 'BROTHER IN LAW');
INSERT INTO relationship VALUES( 55, 65, 'business');
INSERT INTO relationship VALUES( 56, 66, 'SISTER');
INSERT INTO relationship VALUES( 57, 67, 'BROTHER');
INSERT INTO relationship VALUES( 58, 68, 'BROTHER');
INSERT INTO relationship VALUES( 59, 69, 'FATHER');
INSERT INTO relationship VALUES( 60, 70, 'BROTHER');
INSERT INTO relationship VALUES( 61, 71, 'UNCLE');
INSERT INTO relationship VALUES( 72, 82, 'business');
INSERT INTO relationship VALUES( 73, 83, 'BROTHER');
/*shen relationship*/
INSERT INTO relationship VALUES(1,	2,	'brother');
INSERT INTO relationship VALUES(3,	4,	'friend');
INSERT INTO relationship VALUES(5,	6,	'brother');
INSERT INTO relationship VALUES(7,	8,	'aunt and nephew');
INSERT INTO relationship VALUES(15,	16, 'business');


/*insert letter relationship*/
INSERT INTO LETTERRELATIONSHIP VALUES(10,	59,	'response and original letter');
INSERT INTO LETTERRELATIONSHIP VALUES(1,	11,	'response and original letter');

/*create an index for topics*/
ALTER TABLE TOPIC
DROP INDEX SUBJECTS;
CREATE UNIQUE INDEX SUBJECTS
ON TOPIC (TOPIC_DESCRIPTION);

/*update records*/
UPDATE ENVELOPE
SET ENVELOPE_SENDSEAL = 'ROOCHESTER, MINN;1906-07-08', ENVELOPE_RECSEAL = 'VANCOUVER, BC;1906-07-21'
WHERE LETTER_ID = 63;

UPDATE LOCATION
SET LOCATION_MAPPED = 'NO'
WHERE LOCATION_ID = 4

/*GROUP BY QUERY*/
SELECT t.TOPIC_DESCRIPTION, COUNT(t.TOPIC_DESCRIPTION)
FROM EXPRESS e INNER JOIN TOPIC t ON t.TOPIC_ID = e.TOPIC_ID
GROUP BY t.TOPIC_DESCRIPTION
ORDER BY COUNT(t.TOPIC_DESCRIPTION) DESC
/*IN OPERATOR and concat*/
SELECT l.LETTER_TITLE, l.LETTER_LINK, CONCAT(loc.LOCATION_DESCRIPTION, ', ', loc.LOCATION_CITYORCOUNTY,', ',loc.LOCATION_PROVINCE, ', ', loc.LOCATION_COUNTRY) AS ADDRESS
FROM LETTER l INNER JOIN LOCATION loc ON l.SENDERLOC_ID = loc.LOCATION_ID
WHERE ((loc.LOCATION_PROVINCE NOT LIKE 'BC' ) OR (loc.LOCATION_PROVINCE IS NULL)) AND (l.LETTER_CREATEDYEAR=1902)

/*JOIN LETTERS WITH RESPONSES TOGETHER*/
SELECT r.LETTER1_ID AS LETTER1, l1.LETTER_TITLE, l1.LETTER_LINK, r.LETTER2_ID AS LETTER2, l2.LETTER_TITLE, l2.LETTER_LINK, r.LETTERRELATIONSHIP_DESCRIPTION
FROM LETTERRELATIONSHIP r INNER JOIN LETTER l1 ON (l1.LETTER_ID = r.LETTER1_ID) 
				INNER JOIN LETTER l2 ON (l2.LETTER_ID = r.LETTER2_ID)
/*conCAT*/
SELECT  CONCAT(p1.PEOPLE_LNAME, ', ',p1.PEOPLE_FNAME) AS PEOPLE1_NAME,  CONCAT(p2.PEOPLE_LNAME, ', ',p2.PEOPLE_FNAME) AS PEOPLE2_NAME, r.RELATIONSHIP_DESCRIPTION
FROM RELATIONSHIP r INNER JOIN PEOPLE p1 ON (p1.PEOPLE_ID = r.PEOPLE1_ID) 
				INNER JOIN PEOPLE p2 ON (p2.PEOPLE_ID = r.PEOPLE2_ID) 
WHERE r.RELATIONSHIP_DESCRIPTION LIKE '%BROTHER%'
/*create index2*/
CREATE INDEX idx_firstname
ON people (PEOPLE_FNAME);

CREATE INDEX idx_lastname
ON people (PEOPLE_LNAME);
/*create view*/
create view jobsdetail as
SELECT  CONCAT(pl.PEOPLE_LNAME, ' ',pl.PEOPLE_FNAME) AS PEOPLE_NAME,
	    cp.COMPANY_TYPE,
        cp.COMPANY_name,
        lc.LOCATION_DESCRIPTION
FROM employment ep
    INNER JOIN PEOPLE pl ON (pl.PEOPLE_ID = ep.PEOPLE_ID) 
    INNER JOIN company cp ON (cp.company_ID = ep.company_ID) 
	inner join location lc on cp.LOCATION_ID = lc.location_id;
    
select * from jobsdetail;

create view letterbrief as
SELECT  l.letter_createdyear, CONCAT(pls.PEOPLE_LNAME, ' ',pls.PEOPLE_FNAME) AS sender_NAME, 
        CONCAT(plr.PEOPLE_LNAME, ' ',plr.PEOPLE_FNAME) AS receiver_NAME,
	    tp.topic_description        
FROM express ex
    INNER JOIN letter l ON (l.letter_id = ex.letter_ID) 
    INNER JOIN topic tp ON (ex.topic_ID = tp.TOPIC_ID) 
	inner join people pls on pls.PEOPLE_ID = l.SENDER_ID
    inner join people plr on plr.PEOPLE_ID = l.RECEIVER_ID;